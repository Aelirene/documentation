---
title: Авторизация
keywords: sample
summary:
sidebar: evotordoc_sidebar
permalink: doc_authorization.html
folder: evotordoc/evotor_about
---

В зависимости от типа приложения, для работы с Облаком Эвотор вам могут понадобиться следующие токены:

* токен стороннего сервиса;
* токен пользователя;
* токен приложения.


### Токен стороннего сервиса

Сторонний сервис использует токен для авторизации запросов Облака Эвотор в рамках работы с учётной записью в стороннем сервисе. Облако передаёт токен стороннего сервиса в заголовке `Authorization`. Токен необходим для авторизации следующих запросов и уведомлений:

* [Регистрация новой учётной записи](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1create%2Fpost)
* [Авторизация существующего пользователя](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1verify%2Fpost)
* [События биллинга](https://api.evotor.ru/docs/#tag/Vebhuki-uvedomleniya%2Fpaths%2F~1partner.ru~1api~1v1~1subscription~1event%2Fpost)
* [Адрес для получения токена приложения](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1token%2Fpost)

Чтобы задать токен стороннего сервиса:
1. На сайте [dev.evotor.ru](https://dev.evotor.ru/) выберите приложение для которого требуется задать токен.
2. На вкладке **Интеграция** выберите необходимый параметр (например, **События биллинга**) и укажите:
  * Токен в формате uuid4, если ваш сервис использует bearer-авторизацию.
  * Логин и пароль для доступа к вашему сервису, если он использует basic-авторизацию.

В ответ на запросы [Регистрация новой учётной записи](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1create%2Fpost) и [Авторизация существующего пользователя](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1verify%2Fpost) сторонний сервис возвращает в Облако *токен пользователя*.

### Токен пользователя

При создании нового или авторизации существующего пользователя, сторонний сервис возвращает в Облако уникальный *токен пользователя*. Облако передаёт токен в заголовке `Authorization` запросов приложения к стороннему сервису.

### Токен приложения

Облако присваивает токен приложения каждому установленному приложению и с его помощью определяет в рамках какого пользователя действуют запросы стороннего сервиса. При запросе к REST API Облака Эвотор, например, для получения списка товаров или магазинов пользователя, сторонний сервис передаёт *токен приложения* в заголовке `X-Authorization`.
Получить токен, который Облако выдало установленному приложению, вы можете одним из способов:
* по адресу [`partner.ru/api/v1/user/token`](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1token%2Fpost).

    Авторизуйте запросы Облака с помощью токена стороннего сервиса.

* В GET-параметре `token` веб-адреса iframe-приложения:
  ```curl
  https://partner.org/#/?uid=<example>&token=string
  ```

  ![Токен для интеграции с 1с](images/iframe_token.png)

* В Личном кабинете пользователя Эвотор, в разделе **Настройки** приложения.

    В этом случае, пользователю требуется вручную указать токен в интерфейсе стороннего приложения. Такой метод рекомендуется при работе с интеграциями 1С.

Чтобы отображать токен на закладке настроек приложения:
1. На сайте [dev.evotor.ru](https://dev.evotor.ru) выберите приложение для которого требуется задать токен.
2. На вкладке **Интеграция** установите флажок **Создать закладку "Настройки" на странице приложения**.
3. В блоке **Настройка формы** нажмите на кнопку **Текстовое поле** и укажите поля:
    * **FormData name** – Токен приложения.
    * **RegExp для ввода символов** – `${token}`.
    * При необходимости укажите дополнительную информацию в поле **Подсказка к полю**.

    ![Токен для интеграции с 1с](images/1c_integration_API_key.png)

Токен приложения будет автоматически скопирован из базы данных и отображён в поле **Токен приложения** на вкладке **Настройки**.
